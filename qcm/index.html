<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Madilium | R√©vision Anatomie Interactive</title>
    <style>
        :root {
            --primary: #4f46e5;
            --primary-dark: #4338ca;
            --gradient-main: linear-gradient(135deg, #4f46e5 0%, #8b5cf6 100%);
            --success: #10b981;
            --error: #ef4444;
            --bg: #f1f5f9;
            --text: #1e293b;
            --text-light: #64748b;
        }

        * { box-sizing: border-box; font-family: 'Segoe UI', system-ui, sans-serif; }
        
        body { 
            margin: 0; padding: 0; 
            background-color: var(--bg);
            color: var(--text); 
            min-height: 100vh; 
            display: flex; flex-direction: column; 
        }

        header {
            background: white;
            padding: 1rem 2rem;
            display: flex; justify-content: space-between; align-items: center;
            box-shadow: 0 4px 20px rgba(0,0,0,0.05);
            position: sticky; top: 0; z-index: 100;
        }
        .logo { font-weight: 800; font-size: 1.5rem; background: var(--gradient-main); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        
        main { flex: 1; max-width: 850px; width: 100%; margin: 3rem auto; padding: 0 1.5rem; }

        .card {
            background: white;
            border-radius: 24px;
            padding: 2.5rem;
            box-shadow: 0 20px 40px -10px rgba(79, 70, 229, 0.1);
            border: 1px solid #f1f5f9;
        }

        .grid-menu { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 1.5rem; }
        .course-btn {
            background: white;
            border: 2px solid transparent;
            padding: 2rem 1.5rem;
            border-radius: 16px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05);
            position: relative; overflow: hidden;
        }
        .course-btn::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 5px; background: var(--gradient-main); }
        .course-btn:hover { transform: translateY(-5px); box-shadow: 0 15px 30px -5px rgba(79, 70, 229, 0.15); border-color: #e0e7ff; }
        .course-btn strong { display: block; font-size: 1.1rem; color: var(--text); margin-top: 0.5rem; }

        .hidden { display: none !important; }
        
        .progress-container { background: #e2e8f0; height: 10px; border-radius: 10px; margin-bottom: 2.5rem; overflow: hidden; }
        .progress-bar { height: 100%; background: var(--gradient-main); width: 0%; transition: width 0.5s ease; }

        .question-text { font-size: 1.3rem; font-weight: 700; margin-bottom: 2rem; color: var(--text); }

        .options-list { display: flex; flex-direction: column; gap: 1rem; }
        .option-btn {
            padding: 1.2rem;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            background: white;
            cursor: pointer;
            text-align: left;
            font-size: 1rem;
            transition: all 0.2s;
        }
        .option-btn:hover:not(:disabled) { border-color: var(--primary); background: #eef2ff; }
        .option-btn.correct { background: #dcfce7; border-color: var(--success); color: #166534; }
        .option-btn.wrong { background: #fee2e2; border-color: var(--error); color: #991b1b; }

        .feedback-box {
            margin-top: 2rem; padding: 1.5rem; border-radius: 12px;
            background: #f8fafc; border-left: 5px solid var(--primary);
            animation: slideUp 0.3s ease;
        }

        .btn-action {
            background: var(--gradient-main); color: white; border: none;
            padding: 1rem 2rem; border-radius: 50px; font-weight: 700; cursor: pointer;
            margin-top: 2rem; float: right;
        }

        .score-circle {
            width: 150px; height: 150px; border-radius: 50%;
            background: conic-gradient(var(--primary) 0%, #e2e8f0 0%);
            margin: 0 auto 2rem; display: flex; align-items: center; justify-content: center;
            font-size: 2.5rem; font-weight: 800; color: var(--primary-dark);
            position: relative;
        }
        .score-circle::before { content: ''; position: absolute; width: 120px; height: 120px; background: white; border-radius: 50%; }
        .score-val { position: relative; z-index: 2; }

        @keyframes slideUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<header>
    <div class="logo">MADILIUM</div>
    <div>Session M√©decine</div>
</header>

<main>
    <div id="menu-screen" class="card">
        <h1 style="margin-top:0;">Pr√™t √† r√©viser ?</h1>
        <p style="color:var(--text-light); margin-bottom: 2rem;">Choisis un module pour commencer.</p>
        <div class="grid-menu">
            <button class="course-btn" onclick="startQuiz('peritoine')"><strong>1. Le P√©ritoine</strong></button>
            <button class="course-btn" onclick="startQuiz('estomac')"><strong>2. L'Estomac</strong></button>
            <button class="course-btn" onclick="startQuiz('bdp')"><strong>3. Bloc Duod√©no-P.</strong></button>
            <button class="course-btn" onclick="startQuiz('cavite_orale')"><strong>4. Cavit√© Orale</strong></button>
            <button class="course-btn" onclick="startQuiz('oesophage')"><strong>5. L'≈ísophage</strong></button>
            <button class="course-btn" onclick="startQuiz('paroi_abdo')"><strong>6. Paroi Abdominale</strong></button>
        </div>
    </div>

    <div id="quiz-screen" class="card hidden">
        <div class="progress-container"><div class="progress-bar" id="progress"></div></div>
        <div id="question-text" class="question-text">Chargement...</div>
        <div class="options-list" id="options-list"></div>
        <div id="feedback-block" class="feedback-box hidden">
            <h4 style="margin:0 0 10px 0; color:var(--primary);">Explication</h4>
            <p id="explanation-text" style="margin:0;"></p>
        </div>
        <button id="next-btn" class="btn-action hidden" onclick="nextQuestion()">Suivant</button>
        <button id="finish-btn" class="btn-action hidden" onclick="showResult()">Voir R√©sultats</button>
        <div style="clear:both; padding-top:20px;">
            <button onclick="goHome()" style="background:none; border:none; color:var(--text-light); cursor:pointer;">‚úï Quitter</button>
        </div>
    </div>

    <div id="result-screen" class="card hidden" style="text-align: center;">
        <h2>R√©sultat</h2>
        <div class="score-circle" id="score-circle"><span class="score-val" id="score-display">0%</span></div>
        <p id="result-message" style="font-size: 1.2rem; margin-bottom: 2rem;"></p>
        <button class="btn-action" style="float:none;" onclick="goHome()">Menu Principal</button>
    </div>
</main>

<script>
    const db = {
        'peritoine': [
            { q: "Quelle est la d√©finition exacte des √©piploons (omentums) ?", options: ["Relient le tube digestif √† la paroi", "Relient deux organes intra-abdominaux entre eux", "Rattachent des organes hors tube digestif √† la paroi", "Ce sont des ligaments suspenseurs"], correct: 1, explanation: "Les √©piploons relient deux organes intra-abdominaux et contiennent des vaisseaux. [cite_start]Les m√©sos relient l'organe √† la paroi[cite: 20]." },
            [cite_start]{ q: "Quelles sont les limites ant√©rieures du Hiatus de Winslow ?", options: ["La veine cave inf√©rieure", "Le tronc c≈ìliaque", "Le bord libre du petit √©piploon", "Le ligament gastro-spl√©nique"], correct: 2, explanation: "L'entr√©e de l'arri√®re-cavit√© est limit√©e en avant par le bord libre du petit √©piploon et en arri√®re par la VCI[cite: 59]." },
            [cite_start]{ q: "Quel est le point le plus d√©clive de la cavit√© p√©riton√©ale ?", options: ["Espace sous-phr√©nique droit", "Cul-de-sac de Douglas", "Goutti√®re pari√©to-colique", "Arri√®re-cavit√© des √©piploons"], correct: 1, explanation: "Le cul-de-sac de Douglas est le point le plus bas o√π s'accumulent les liquides pathologiques[cite: 55]." },
            [cite_start]{ q: "Le fascia de Treitz correspond √† :", options: ["L'accolement du c√¥lon ascendant", "L'accolement du bloc duod√©no-pancr√©atique", "L'accolement du c√¥lon descendant", "Au ligament suspenseur du foie"], correct: 1, explanation: "Le fascia de Treitz fixe le duod√©no-pancr√©as √† la paroi post√©rieure[cite: 23]." },
            [cite_start]{ q: "Quel organe est consid√©r√© comme v√©ritablement 'intra-p√©riton√©al' (non recouvert de p√©ritoine) ?", options: ["L'estomac", "L'ovaire", "Le foie", "La rate"], correct: 1, explanation: "L'ovaire est le seul organe intra-p√©riton√©al vrai car une partie reste √† d√©couvert dans la cavit√©[cite: 36]." },
            [cite_start]{ q: "La bourse omentale (arri√®re cavit√©) permet :", options: ["Le glissement de l'estomac", "La fixation du foie", "La protection de la vessie", "Le passage de l'aorte"], correct: 0, explanation: "C'est un espace de glissement situ√© en arri√®re de l'estomac[cite: 59]." }
        ],
        'estomac': [
            [cite_start]{ q: "Le cercle art√©riel de la petite courbure est form√© par :", options: ["Gastro-omentale droite + gauche", "Spl√©nique + H√©patique", "Gastrique gauche + Gastrique droite", "Mesent√©rique sup + inf"], correct: 2, explanation: "Anastomose de l'a. gastrique gauche (tronc c≈ìliaque) et gastrique droite (h√©patique propre) [cite: 237-238]." },
            [cite_start]{ q: "Le sphincter lisse situ√© √† la sortie de l'estomac est :", options: ["Le cardia", "Le pylore", "Le sphincter d'Oddi", "L'angle de His"], correct: 1, explanation: "Le pylore est muni d'un sphincter lisse s√©parant l'estomac du duod√©num[cite: 177]." },
            [cite_start]{ q: "Rapports post√©rieurs de l'estomac via la bourse omentale :", options: ["Foie et v√©sicule", "Pancr√©as, rein gauche et surr√©nale gauche", "C√¥lon droit et appendice", "Vessie"], correct: 1, explanation: "L'estomac repose en arri√®re sur le corps/queue du pancr√©as, le rein gauche et la surr√©nale gauche[cite: 220]." },
            [cite_start]{ q: "La couche musculaire la plus profonde de l'estomac est :", options: ["Longitudinale", "Circulaire", "Oblique", "Transversale"], correct: 2, explanation: "La tunique musculeuse profonde est oblique[cite: 202]." },
            [cite_start]{ q: "Le drainage lymphatique des 2/3 m√©diaux de la portion verticale se fait vers :", options: ["Les n≈ìuds spl√©niques", "Les n≈ìuds gastriques gauches", "Les n≈ìuds h√©patiques", "Les n≈ìuds m√©sent√©riques"], correct: 1, explanation: "Vers la cha√Æne gastrique gauche[cite: 247]." },
            [cite_start]{ q: "Le nerf vague gauche innerve principalement :", options: ["La face post√©rieure", "La face ant√©rieure (nerf principal ant√©rieur)", "Le pylore uniquement", "Le fundus uniquement"], correct: 1, explanation: "Le vague gauche donne le nerf principal ant√©rieur[cite: 254]." }
        ],
        'bdp': [
            [cite_start]{ q: "Le Bloc Duod√©no-Pancr√©atique comprend :", options: ["Tout le pancr√©as", "La t√™te et l'isthme + duod√©num", "La queue + duod√©num", "Le corps + j√©junum"], correct: 1, explanation: "La t√™te et l'isthme sont solidaires du cadre duod√©nal et fix√©s par le fascia de Treitz[cite: 352]." },
            [cite_start]{ q: "L'ampoule de Vater s'ouvre au niveau de :", options: ["La petite caroncule", "La grande caroncule (Papille majeure)", "D1 (Bulbe)", "D3"], correct: 1, explanation: "Dans la partie descendante (D2) au niveau de la grande caroncule[cite: 281]." },
            [cite_start]{ q: "Vascularisation de la t√™te du pancr√©as :", options: ["Art√®re spl√©nique seule", "Arcades pancr√©atico-duod√©nales", "Art√®re r√©nale", "Art√®re colique"], correct: 1, explanation: "Par les arcades sup. et inf. issues de la gastro-duod√©nale et de l'AMS[cite: 436]." },
            [cite_start]{ q: "La veine porte se forme en arri√®re de :", options: ["La t√™te du pancr√©as", "L'isthme du pancr√©as", "La queue du pancr√©as", "Le duod√©num"], correct: 1, explanation: "La confluence veineuse porte se fait juste derri√®re l'isthme pancr√©atique[cite: 396]." },
            [cite_start]{ q: "Le conduit pancr√©atique accessoire (Santorini) s'ouvre dans :", options: ["La grande caroncule", "La petite caroncule", "L'ampoule de Vater", "Le canal chol√©doque"], correct: 1, explanation: "Au niveau de la petite caroncule, situ√©e au-dessus de la grande[cite: 323]." },
            [cite_start]{ q: "Rapport post√©rieur vasculaire majeur du BDP :", options: ["Aorte et VCI", "Art√®re f√©morale", "Veine jugulaire", "Tronc pulmonaire"], correct: 0, explanation: "Le bloc est plaqu√© contre l'aorte et la veine cave inf√©rieure [cite: 413-414]." }
        ],
        'cavite_orale': [
            { q: "Innervation sensitive des 2/3 ant√©rieurs de la langue :", options: ["Nerf Glossopharyngien (IX)", "Nerf Vague (X)", "Nerf Lingual (V)", "Nerf Hypoglosse (XII)"], correct: 2, explanation: "Le nerf lingual (V) pour les 2/3 ant√©rieurs. [cite_start]Le IX pour le 1/3 post√©rieur[cite: 113]." },
            [cite_start]{ q: "Le canal de St√©non (parotide) s'abouche :", options: ["Sous la langue", "En regard du collet de la 2√®me molaire sup.", "Dans le fond du vestibule inf.", "Au niveau du frein lingual"], correct: 1, explanation: "Il s'ouvre en regard du collet de la 2√®me molaire sup√©rieure[cite: 134]." },
            [cite_start]{ q: "L'action du muscle g√©nio-glosse est :", options: ["R√©traction de la langue", "√âl√©vation de la langue", "Protraction (tirer la langue)", "√âlargissement de la langue"], correct: 2, explanation: "Il attire la langue en bas et en avant (protraction)[cite: 98]." },
            [cite_start]{ q: "Quel nerf traverse la parotide (danger chirurgical) ?", options: ["Nerf Facial (VII)", "Nerf Trijumeau (V)", "Nerf Vague (X)", "Nerf Spinal (XI)"], correct: 0, explanation: "Le nerf facial traverse la glande, c'est le rapport le plus dangereux[cite: 126]." },
            [cite_start]{ q: "Le plancher buccal est form√© principalement par le muscle :", options: ["Mylo-hyo√Ødien", "G√©nio-glosse", "Digastrique", "Stylo-glosse"], correct: 0, explanation: "Le mylo-hyo√Ødien forme le 'diaphragme buccal'[cite: 86]." },
            [cite_start]{ q: "La glande submandibulaire se draine par le canal de :", options: ["St√©non", "Wharton", "Wirsung", "Santorini"], correct: 1, explanation: "Le canal de Wharton qui s'ouvre √† la papille sublinguale[cite: 146]." }
        ],
        'oesophage': [
            [cite_start]{ q: "Limites vert√©brales de l'≈ìsophage :", options: ["C4 √† Th10", "C6 √† Th11", "Th1 √† L2", "C2 √† C7"], correct: 1, explanation: "De C6 jusqu'√† Th11[cite: 566]." },
            [cite_start]{ q: "Au niveau abdominal, le nerf vague DROIT est situ√© :", options: ["En avant de l'≈ìsophage", "En arri√®re de l'≈ìsophage", "Sur le flanc droit", "Il ne descend pas si bas"], correct: 1, explanation: "Le vague droit passe √† sa face post√©rieure[cite: 595]." },
            [cite_start]{ q: "Quel √©l√©ment N'EST PAS un moyen anti-reflux ?", options: ["Angle de His", "Valvule de Gubaroff", "Membrane phr√©no-≈ìsophagienne", "Le sphincter stri√© sup√©rieur"], correct: 3, explanation: "Le syst√®me anti-reflux est le sphincter INF√âRIEUR (fonctionnel) et ses annexes[cite: 606]." },
            [cite_start]{ q: "L'≈ìsophage thoracique chemine dans :", options: ["Le m√©diastin ant√©rieur", "Le m√©diastin post√©rieur", "L'espace pleural", "La cavit√© p√©ricardique"], correct: 1, explanation: "Il est contenu dans le m√©diastin post√©rieur[cite: 576]." },
            [cite_start]{ q: "R√©tr√©cissement ≈ìsophagien d√ª √† la crosse aortique :", options: ["Crico√Ødien", "Aortique", "Diaphragmatique", "Pylorique"], correct: 1, explanation: "R√©tr√©cissement aortique (croisement en T4)[cite: 563]." },
            [cite_start]{ q: "Le drainage veineux de l'≈ìsophage r√©alise une anastomose :", options: ["Porto-Cave", "Cavo-Cave", "Porto-Porte", "Art√©rio-Veineuse"], correct: 0, explanation: "Entre le syst√®me cave (azygos) et porte (coronaire stomachique)[cite: 602]." }
        ],
        'paroi_abdo': [
            [cite_start]{ q: "Ordre des muscles larges de la superficie √† la profondeur :", options: ["Transverse -> Oblique Int -> Oblique Ext", "Oblique Ext -> Oblique Int -> Transverse", "Grand Droit -> Pyramidal", "Interne -> Externe -> Transverse"], correct: 1, explanation: "Oblique Externe, Oblique Interne, puis Transverse en profondeur[cite: 490]." },
            [cite_start]{ q: "Le plancher (paroi inf√©rieure) du canal inguinal est form√© par :", options: ["Le tendon conjoint", "Le ligament inguinal", "Le fascia transversalis", "Le muscle grand droit"], correct: 1, explanation: "Le ligament inguinal (arcade crurale) forme la paroi inf√©rieure[cite: 545]." },
            [cite_start]{ q: "L'orifice inguinal profond est creus√© dans :", options: ["L'apon√©vrose de l'oblique externe", "Le fascia transversalis", "La peau", "Le p√©ritoine"], correct: 1, explanation: "Il est ouvert dans la paroi post√©rieure (fascia transversalis)[cite: 543]." },
            [cite_start]{ q: "Quelle hernie passe par la fosse inguinale lat√©rale ?", options: ["Hernie directe", "Hernie indirecte", "Hernie ombilicale", "Hernie crurale"], correct: 1, explanation: "Les hernies inguinales indirectes (les plus courantes) passent par la fosse lat√©rale[cite: 527]." },
            [cite_start]{ q: "La gaine des droits sous la ligne arqu√©e (Douglas) :", options: ["Est compl√®te", "N'a plus de feuillet post√©rieur", "Est tr√®s √©paisse", "Contient le muscle pyramidal"], correct: 1, explanation: "Le feuillet post√©rieur est interrompu √† ce niveau (fascia transversalis seul en arri√®re)[cite: 518]." },
            [cite_start]{ q: "Innervation motrice principale des muscles de la paroi :", options: ["Nerf vague", "Nerfs intercostaux (6 derniers) + Ilio-hypogastrique", "Plexus brachial", "Nerf sciatique"], correct: 1, explanation: "Nerfs thoraco-abdominaux et nerfs ilio-hypogastrique/ilio-lombaire [cite: 501-504]." }
        ]
    };

    let currentQuiz = [];
    let currentIndex = 0;
    let score = 0;

    const dom = {
        menu: document.getElementById('menu-screen'),
        quiz: document.getElementById('quiz-screen'),
        result: document.getElementById('result-screen'),
        qText: document.getElementById('question-text'),
        opts: document.getElementById('options-list'),
        progress: document.getElementById('progress'),
        feedback: document.getElementById('feedback-block'),
        explain: document.getElementById('explanation-text'),
        next: document.getElementById('next-btn'),
        finish: document.getElementById('finish-btn'),
        scoreDisplay: document.getElementById('score-display'),
        scoreCircle: document.getElementById('score-circle'),
        msg: document.getElementById('result-message')
    };

    function startQuiz(id) {
        if(!db[id]) return alert("Erreur: module introuvable");
        currentQuiz = db[id];
        currentIndex = 0; score = 0;
        
        dom.menu.classList.add('hidden');
        dom.result.classList.add('hidden');
        dom.quiz.classList.remove('hidden');
        
        renderQuestion();
    }

    function renderQuestion() {
        const q = currentQuiz[currentIndex];
        dom.qText.innerHTML = `<span style="font-size:0.9rem; color:var(--primary); display:block; margin-bottom:10px;">QUESTION ${currentIndex + 1}/${currentQuiz.length}</span>` + q.q;
        dom.opts.innerHTML = '';
        dom.feedback.classList.add('hidden');
        dom.next.classList.add('hidden');
        dom.finish.classList.add('hidden');
        
        const pct = (currentIndex / currentQuiz.length) * 100;
        dom.progress.style.width = pct + '%';

        q.options.forEach((opt, i) => {
            const btn = document.createElement('button');
            btn.className = 'option-btn';
            btn.innerText = opt;
            btn.onclick = () => handleAnswer(i, btn);
            dom.opts.appendChild(btn);
        });
    }

    function handleAnswer(choiceIndex, btn) {
        Array.from(dom.opts.children).forEach(b => b.disabled = true);
        const q = currentQuiz[currentIndex];
        
        if(choiceIndex === q.correct) {
            btn.classList.add('correct');
            score++;
        } else {
            btn.classList.add('wrong');
            dom.opts.children[q.correct].classList.add('correct');
        }

        dom.explain.innerText = q.explanation;
        dom.feedback.classList.remove('hidden');

        if(currentIndex < currentQuiz.length - 1) {
            dom.next.classList.remove('hidden');
        } else {
            dom.finish.classList.remove('hidden');
        }
        dom.progress.style.width = ((currentIndex + 1) / currentQuiz.length) * 100 + '%';
    }

    function nextQuestion() {
        currentIndex++;
        renderQuestion();
    }

    function showResult() {
        dom.quiz.classList.add('hidden');
        dom.result.classList.remove('hidden');
        
        const pct = Math.round((score / currentQuiz.length) * 100);
        dom.scoreDisplay.innerText = pct + '%';
        dom.scoreCircle.style.background = `conic-gradient(var(--primary) ${pct}%, #e2e8f0 0%)`;
        
        if(pct === 100) dom.msg.innerText = "üèÜ Exceptionnel ! Tu es un chef.";
        else if(pct >= 80) dom.msg.innerText = "üî• Tr√®s solide ! Continue comme √ßa.";
        else if(pct >= 50) dom.msg.innerText = "üëç Pas mal, mais revois les d√©tails.";
        else dom.msg.innerText = "üìö Il faut relire le cours, courage !";
    }

    function goHome() {
        dom.result.classList.add('hidden');
        dom.quiz.classList.add('hidden');
        dom.menu.classList.remove('hidden');
    }
</script>

</body>
</html>
